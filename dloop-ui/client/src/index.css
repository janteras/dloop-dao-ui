@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: hsl(210 40% 98%);
    --foreground: hsl(222 47% 11%);
    --primary: hsl(158 79% 45%);
    --primary-hover: hsl(158 79% 40%);
  }

  .dark {
    --background: hsl(0 0% 13%);
    --foreground: hsl(0 0% 95%);
    --primary: hsl(158 79% 55%);
    --primary-hover: hsl(158 79% 50%);
  }
}

@layer base {
  /* Prevent text selection during taps */
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  /* Improve touch scrolling */
  body {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: none;
  }
}

@layer components {
  /* Enhanced mobile-first interactions */
  .btn-hover-effect {
    @apply transition-all duration-200 
           active:scale-95 hover:scale-[1.02]
           touch-none select-none
           min-h-[44px] min-w-[44px]
           relative overflow-hidden
           after:absolute after:inset-0
           after:bg-white/10 after:opacity-0
           hover:after:opacity-100 after:transition-opacity;
    -webkit-tap-highlight-color: transparent;
  }

  /* Enhanced card interactions */
  .interactive-card {
    @apply transition-all duration-300 hover:border-primary/50 hover:shadow-lg hover:shadow-primary/5;
  }

  /* Mobile-optimized containers */
  .mobile-container {
    @apply w-full px-4 sm:px-6 lg:px-8 mx-auto max-w-7xl;
  }

  /* Touch-friendly inputs */
  .touch-input {
    @apply min-h-[44px] px-4 w-full rounded-lg;
  }

  /* Mobile navigation */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 bg-background border-t border-border 
           p-2 flex justify-around items-center sm:hidden;
  }

  /* Link hover effects */
  .link-hover {
    @apply relative after:absolute after:bottom-0 after:left-0 after:right-0 
           after:h-[2px] after:bg-primary after:scale-x-0 hover:after:scale-x-100 
           after:transition-transform after:duration-300;
  }
}

/* Base theme variables - Light mode defaults */
:root {
  /* Base colors - Light mode */
  --background: 210 40% 98%;
  --foreground: 222 47% 8%;  /* Darker for better contrast */
  --muted: 210 40% 93%;
  --muted-foreground: 215 25% 27%;  /* Darker for better contrast */
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --border: 214 32% 91%;
  --input: 214 32% 97%;
  --input-foreground: 222 47% 11%;
  --input-placeholder: 215 16% 47%;
  --input-border: 214 32% 91%;
  --primary: 158 79% 45%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 93%;
  --secondary-foreground: 222 47% 11%;
  --accent: 158 79% 45%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 210 40% 98%;
  --ring: 158 79% 45%;
  --radius: 0.5rem;

  /* Custom D-Loop colors - Light mode */
  --color-ultra-light-gray: 0 0% 98%; 
  --color-light-gray: 0 0% 94%;
  --color-gray: 0 0% 84%;
  --color-dark-gray: 0 0% 30%;
  --color-dark-bg: 0 0% 98%;
  --color-accent: 158 79% 45%;
  --color-darker-accent: 158 79% 35%;
  --color-warning-red: 0 84% 60%;

  /* Chart colors - Light mode */
  --chart-1: 158 79% 45%;
  --chart-2: 210 100% 55%;
  --chart-3: 47 100% 45%;
  --chart-4: 325 80% 55%;
  --chart-5: 280 80% 55%;

  /* Light/Dark theme transition */
  --theme-transition: background-color 0.5s ease, color 0.5s ease, border-color 0.5s ease, fill 0.5s ease, stroke 0.5s ease, box-shadow 0.5s ease, transform 0.5s ease;
}

/* Dark theme variables */
[data-theme="dark"] {
  --background: 0 0% 13%;
  --foreground: 0 0% 95%;
  --muted: 0 0% 17%;
  --muted-foreground: 0 0% 65%;
  --popover: 0 0% 13%;
  --popover-foreground: 0 0% 95%;
  --card: 0 0% 17%;
  --card-foreground: 0 0% 95%;
  --border: 0 0% 27%;
  --input: 0 0% 20%;
  --input-foreground: 0 0% 95%;
  --input-placeholder: 0 0% 65%;
  --input-border: 0 0% 35%;
  --primary: 158 79% 55%;
  --primary-foreground: 0 0% 13%;
  --secondary: 0 0% 17%;
  --secondary-foreground: 0 0% 98%;
  --accent: 158 79% 55%;
  --accent-foreground: 0 0% 13%;
  --destructive: 8 83% 55%;
  --destructive-foreground: 0 0% 98%;
  --ring: 158 79% 55%;

  /* Custom D-Loop colors - Dark mode */
  --color-ultra-light-gray: 0 0% 98%; 
  --color-light-gray: 0 0% 94%; 
  --color-gray: 0 0% 84%;
  --color-dark-gray: 0 0% 17%;
  --color-dark-bg: 0 0% 13%;
  --color-accent: 158 79% 55%;
  --color-darker-accent: 158 79% 25%;
  --color-warning-red: 8 83% 55%;

  /* Chart colors - Dark mode */
  --chart-1: 158 79% 55%;
  --chart-2: 210 100% 60%;
  --chart-3: 47 100% 50%;
  --chart-4: 325 80% 60%;
  --chart-5: 280 80% 60%;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

@layer utilities {
  .scale-102 {
    --tw-scale-x: 1.02;
    --tw-scale-y: 1.02;
    transform: scale(var(--tw-scale-x), var(--tw-scale-y));
  }

  @screen sm {
    .sm\:hover\:scale-102:hover {
      --tw-scale-x: 1.02;
      --tw-scale-y: 1.02;
      transform: scale(var(--tw-scale-x), var(--tw-scale-y));
    }
  }
}

@layer components {
  /* Layout and backgrounds */
  .gradient-bg {
    @apply bg-gradient-to-br from-[#202020] to-[#2c2c2c];
  }

  .accent-gradient {
    @apply bg-gradient-to-br from-accent to-[#0e704e];
  }

  /* Component styles */
  .proposal-card:hover {
    @apply border-accent transition-all duration-300;
  }

  /* Enhanced mobile-first interactions */
  .btn-hover-effect {
    @apply transition-all duration-200 active:scale-95 sm:hover:scale-102 
    min-h-[44px] px-4 sm:px-6 
    flex items-center justify-center gap-2
    rounded-lg font-medium;
}

/* Enhanced touch targets for mobile */
.mobile-touch-target {
  @apply min-h-[44px] min-w-[44px] p-3 sm:p-2;
}

/* Mobile-optimized card layouts */
.mobile-card {
  @apply p-4 sm:p-6 
    border border-border 
    rounded-xl sm:rounded-lg 
    shadow-sm hover:shadow-md 
    transition-all duration-300
    bg-card text-card-foreground;
}

/* Mobile-first grid layouts */
.responsive-grid {
  @apply grid grid-cols-1 
    sm:grid-cols-2 
    lg:grid-cols-3 
    gap-4 sm:gap-6;
}

/* Enhanced form controls for touch */
.mobile-input {
  @apply min-h-[44px] px-4 
    rounded-lg border border-input 
    bg-background text-foreground
    focus:outline-none focus:ring-2 
    focus:ring-ring focus:ring-offset-2;
}

  .btn-hover-effect:hover {
    @apply sm:transform sm:-translate-y-0.5 sm:shadow-md sm:shadow-accent/20;
  }

  .btn-active-effect:active {
    @apply transform scale-95 sm:translate-y-0.5;
  }

  /* Touch-friendly tap targets */
  @media (max-width: 640px) {
    button, 
    a[role="button"],
    .interactive-element {
      @apply min-h-[44px] min-w-[44px] px-4;
    }

    input,
    select,
    textarea {
      @apply min-h-[44px];
    }
  }

  .page-transition {
    @apply transition-all duration-300;
  }

  .mono {
    @apply font-mono;
  }

  .truncate-address {
    @apply truncate font-mono;
  }

  /* Form styling for better dark/light mode compatibility */
  input, textarea, select {
    @apply bg-[hsl(var(--input))] text-[hsl(var(--input-foreground))] border-[hsl(var(--input-border))] focus:border-[hsl(var(--accent))];
  }

  input::placeholder, textarea::placeholder {
    @apply text-[hsl(var(--input-placeholder))];
  }

  /* Custom modal styling */
  .modal-content {
    @apply bg-[hsl(var(--background))] border border-[hsl(var(--border))] shadow-lg shadow-black/10 dark:shadow-black/30;
  }

  /* Dialog overlay and content */
  .dialog-overlay {
    @apply bg-black/50 backdrop-blur-sm;
  }

  /* Create Proposal form */
  .form-group label {
    @apply block text-[hsl(var(--foreground))] mb-1 font-medium text-sm;
  }

  .form-group input, 
  .form-group textarea, 
  .form-group select {
    @apply w-full p-2 rounded-md border bg-[hsl(var(--input))] text-[hsl(var(--input-foreground))] border-[hsl(var(--input-border))];
  }
}

/* Custom scrollbar - Theme aware */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: hsl(var(--muted));
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground));
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--accent));
}

/* Apply custom scrollbar to body */
html {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--muted-foreground)) hsl(var(--muted));
}

html::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

html::-webkit-scrollbar-track {
  background: hsl(var(--muted));
  border-radius: 0;
}

html::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground));
  border-radius: 0;
}

html::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--accent));
}

/* Wallet connection animation */
@keyframes gradientMove {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.animate-gradient {
  animation: gradientMove 8s ease infinite;
  background-size: 200% 200%;
}

/* Connect wallet button pulse animation */
@keyframes softPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.2);
  }
  70% {
    box-shadow: 0 0 0 8px rgba(124, 58, 237, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(124, 58, 237, 0);
  }
}

.wallet-connect-btn:not(:disabled) {
  animation: softPulse 3s infinite;
}

/* Wallet card styles */
.wallet-card-shadow {
  box-shadow: 0 2px 15px rgba(113, 113, 113, 0.1);
  transition: all 0.3s ease;
}

.wallet-card-shadow:hover {
  box-shadow: 0 5px 25px rgba(124, 58, 237, 0.15);
  transform: translateY(-2px);
}

/* Wallet button glow effect */
.wallet-btn-glow {
  position: relative;
  overflow: hidden;
}

.wallet-btn-glow::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(
    transparent, 
    rgba(124, 58, 237, 0.1), 
    transparent
  );
  animation: rotate 3s linear infinite;
  z-index: -1;
}

@keyframes rotate {
  100% {
    transform: rotate(1turn);
  }
}

/* Theme transition animations */
.theme-transition {
  transition: var(--theme-transition);
}

.theme-transition * {
  transition: var(--theme-transition);
}

/* Enhanced theme morphing */
@keyframes colorMorph {
  0% {
    filter: hue-rotate(0deg) brightness(1);
  }
  50% {
    filter: hue-rotate(5deg) brightness(1.03);
  }
  100% {
    filter: hue-rotate(0deg) brightness(1);
  }
}

.theme-morph {
  animation: colorMorph 2s ease;
}

/* Theme change ripple effect */
.theme-ripple {
  position: relative;
  overflow: hidden;
}

.theme-ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  opacity: 0.3;
  background: radial-gradient(circle, hsl(var(--primary)/0.7) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  border-radius: 50%;
  z-index: -1;
  animation: rippleEffect 1s ease-out forwards;
}

@keyframes rippleEffect {
  0% {
    width: 0;
    height: 0;
    opacity: 0.5;
  }
  100% {
    width: 300%;
    height: 300%;
    opacity: 0;
  }
}

/* Special animations for theme toggle */
@keyframes flip {
  0% {
    transform: rotateY(0);
  }
  50% {
    transform: rotateY(180deg);
  }
  100% {
    transform: rotateY(360deg);
  }
}

.animate-flip {
  animation: flip 0.5s ease;
}

/* Theme toggle button animation */
.theme-toggle-animate {
  animation: pulse 0.5s ease;
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* Color transition for various elements */
.card, .button, .input, .dropdown, .tooltip {
  transition: var(--theme-transition);
}

/* 
 * Responsive Container and Spacing
 * Provides consistent margins and padding across different screen sizes
 */

@layer components {
  /* Responsive container for consistent layout */
  .dloop-container {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;   /* 16px padding on mobile */
    padding-right: 1rem;  /* 16px padding on mobile */
  }

  /* Metric card with minimum height for consistent appearance */
  .metric-card {
    min-height: 180px;
  }

  /* Responsive table container */
  .responsive-table-container {
    overflow-x: auto;
    margin-left: -1rem;
    margin-right: -1rem;
  }

  /* Responsive images */
  .responsive-img {
    max-width: 100%;
    height: auto;
  }
}

/* Small devices (640px and up) */
@media (min-width: 640px) {
  .dloop-container {
    max-width: 640px;
    padding-left: 1.5rem;  /* 24px padding on small screens */
    padding-right: 1.5rem; /* 24px padding on small screens */
  }

  .responsive-table-container {
    margin-left: -1.5rem;
    margin-right: -1.5rem;
  }
}

/* Medium devices (768px and up) */
@media (min-width: 768px) {
  .dloop-container {
    max-width: 768px;
  }
}

/* Large devices (1024px and up) */
@media (min-width: 1024px) {
  .dloop-container {
    max-width: 1024px;
    padding-left: 2rem;  /* 32px padding on large screens */
    padding-right: 2rem; /* 32px padding on large screens */
  }

  .responsive-table-container {
    margin-left: -2rem;
    margin-right: -2rem;
  }
}

/* Extra large devices (1280px and up) */
@media (min-width: 1280px) {
  .dloop-container {
    max-width: 1280px;
  }
}

/* 2XL devices (1536px and up) */
@media (min-width: 1536px) {
  .dloop-container {
    max-width: 1536px;
    padding-left: 2.5rem;  /* 40px padding on extra large screens */
    padding-right: 2.5rem; /* 40px padding on extra large screens */
  }
}