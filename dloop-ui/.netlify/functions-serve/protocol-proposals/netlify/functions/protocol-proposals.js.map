{
  "version": 3,
  "sources": ["../../../../../../Users/apple/Downloads/dloop-dao-ui/dloop-ui/netlify/functions/protocol-proposals.js"],
  "sourceRoot": "/var/folders/k6/tfs_tx3s5fd5xc70ld8bcvlw0000gq/T/tmp-36172-6qsWcOd4m9DV",
  "sourcesContent": ["// ESM version of the protocol-proposals function\n\n// Define hardcoded proposals directly to ensure compatibility\nconst protocolProposals = [\n  {\n    id: 12,\n    title: \"Update Fee Structure\",\n    description: \"Proposal to adjust the performance fee structure for AI nodes to better align incentives across the ecosystem. This will encourage more node operators to participate while ensuring high-quality service delivery.\",\n    proposer: \"0xD4c35e65b1e473dfeC3da98B5fC110f0a78D3e7F\",\n    createdAt: Math.floor(Date.now() / 1000) - 864000,\n    updatedAt: Math.floor(Date.now() / 1000) - 864000,\n    forVotes: 65,\n    againstVotes: 35,\n    voteCount: 320450,\n    executed: false,\n    canceled: false,\n    status: \"active\",\n    endTimestamp: Math.floor(Date.now() / 1000) + 172800,\n    endTimeISO: new Date(Date.now() + 172800 * 1000).toISOString()\n  },\n  {\n    id: 13,\n    title: \"Expand AI Node Network\",\n    description: \"Proposal to fund the expansion of our AI node network, adding 10 new specialized nodes with advanced sentiment analysis capabilities.\",\n    proposer: \"0x3A4B670Be17F3a36F8F55BF7C3c7453495A04Ed1\",\n    createdAt: Math.floor(Date.now() / 1000) - 456000,\n    updatedAt: Math.floor(Date.now() / 1000) - 456000,\n    forVotes: 78,\n    againstVotes: 22,\n    voteCount: 289750,\n    executed: false,\n    canceled: false,\n    status: \"active\",\n    endTimestamp: Math.floor(Date.now() / 1000) + 345600,\n    endTimeISO: new Date(Date.now() + 345600 * 1000).toISOString()\n  },\n  {\n    id: 11,\n    title: \"Community Fund Allocation\",\n    description: \"Proposal to allocate 500,000 DLOOP tokens to the community development fund for supporting ecosystem growth initiatives.\",\n    proposer: \"0x9E23fA851681545894f3B3c33BD1E7D22239BDE8\",\n    createdAt: Math.floor(Date.now() / 1000) - 1296000,\n    updatedAt: Math.floor(Date.now() / 1000) - 1296000,\n    forVotes: 91,\n    againstVotes: 9,\n    voteCount: 412200,\n    executed: true,\n    canceled: false,\n    status: \"executed\",\n    endTimestamp: Math.floor(Date.now() / 1000) - 604800,\n    endTimeISO: new Date(Date.now() - 604800 * 1000).toISOString()\n  }\n];\n\n// Converted to ESM-compatible export format\nexport const handler = async (event, context) => {\n  console.log('Protocol proposals function called - ESM version');\n  \n  // Set CORS headers for all responses\n  const headers = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Headers': 'Content-Type',\n    'Access-Control-Allow-Methods': 'GET, OPTIONS',\n    'Content-Type': 'application/json' // Always set Content-Type for all responses\n  };\n  \n  try {\n    // Handle OPTIONS requests for CORS preflight\n    if (event.httpMethod === 'OPTIONS') {\n      return {\n        statusCode: 204,\n        headers,\n        body: ''\n      };\n    }\n    \n    if (event.httpMethod === 'GET') {\n      // Return all protocol proposals\n      console.log('Returning protocol proposals data');\n      console.log(`Sending ${protocolProposals.length} protocol proposals`);\n      \n      return {\n        statusCode: 200,\n        headers,\n        body: JSON.stringify(protocolProposals)\n      };\n    }\n    \n    // Default response for unsupported methods\n    console.log(`Unsupported method: ${event.httpMethod}`);\n    return {\n      statusCode: 405,\n      headers,\n      body: JSON.stringify({ error: 'Method not allowed' })\n    };\n  } catch (error) {\n    // Log the error but still return valid JSON\n    console.error('Error in protocol-proposals function:', error);\n    return {\n      statusCode: 500,\n      headers,\n      body: JSON.stringify({ \n        error: 'An error occurred processing your request',\n        message: error.message || 'Unknown error',\n        stack: process.env.NODE_ENV === 'development' ? error.stack : undefined\n      })\n    };\n  }\n};\n\n// Using pure ESM exports - we're not using CommonJS compatibility to avoid module conflicts\n"],
  "mappings": "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",
  "names": []
}
