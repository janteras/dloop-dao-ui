import{ay as v,az as Ae,aA as ht,aB as le,aC as fe,_ as yt,aD as oe,aE as _e,aF as O,aG as Me,aH as J,aI as j,aJ as gt,aK as S,aL as wt,aM as xt,aN as Le,aO as Ue,aP as Pt,aQ as te,aR as w,aS as Bt,aT as ne,aU as Ct,aV as be,aW as He,aX as $e,aY as vt,aZ as Z,a_ as It,a$ as ae,b0 as Pe,b1 as kt,b2 as Ft,b3 as Tt,b4 as N,b5 as Et,b6 as Nt,b7 as Gt,b8 as De,b9 as qe,ba as St,bb as Be,bc as pe,bd as At,be as _t,bf as Ce,bg as Mt,bh as Lt,bi as Ut,bj as Ht,bk as $t,bl as Dt,bm as qt,bn as Rt,bo as zt,bp as se,ah as Vt,bq as Ot,br as jt,aj as Re,ak as he,al as $,am as ze,bs as Wt,G as Kt,bt as D,r as x,V as W,bu as Qt,bv as Yt,an as Xt,as as Jt,a3 as Zt,j as L,$ as en,a4 as Ve,o as ve}from"./index-971aa118.js";import{a as Ie,P as z}from"./enhanced-assetDaoService-7803e7af.js";import{u as tn,c as nn,b as sn}from"./contracts-444c63f0.js";import{a as on,u as rn}from"./index-cf00c244.js";class Oe extends v{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class ie extends v{constructor({docsPath:t,metaMessages:n,type:s}){super(`Account type "${s}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function an(e){const t=Ae(`0x${e.substring(4)}`).substring(26);return ht(`0x${t}`)}async function cn({hash:e,signature:t}){const n=le(e)?e:fe(e),{secp256k1:s}=await yt(()=>import("./secp256k1-3bf024f9.js"),["assets/secp256k1-3bf024f9.js","assets/index-971aa118.js","assets/index-cac15cd7.css","assets/enhanced-assetDaoService-7803e7af.js","assets/contracts-444c63f0.js","assets/index-cf00c244.js"]);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:d,s:l,v:u,yParity:f}=t,b=Number(f??u),m=ke(b);return new s.Signature(oe(d),oe(l)).addRecoveryBit(m)}const a=le(t)?t:fe(t);if(_e(a)!==65)throw new Error("invalid signature length");const i=O(`0x${a.slice(130)}`),c=ke(i);return s.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ke(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function un({hash:e,signature:t}){return an(await cn({hash:e,signature:t}))}function dn(e,t="hex"){const n=je(e),s=Me(new Uint8Array(n.length));return n.encode(s),t==="hex"?J(s.bytes):s.bytes}function je(e){return Array.isArray(e)?ln(e.map(t=>je(t))):fn(e)}function ln(e){const t=e.reduce((o,r)=>o+r.length,0),n=We(t);return{length:(()=>t<=55?1+t:1+n+t)(),encode(o){t<=55?o.pushByte(192+t):(o.pushByte(192+55+n),n===1?o.pushUint8(t):n===2?o.pushUint16(t):n===3?o.pushUint24(t):o.pushUint32(t));for(const{encode:r}of e)r(o)}}}function fn(e){const t=typeof e=="string"?j(e):e,n=We(t.length);return{length:(()=>t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length)(),encode(o){t.length===1&&t[0]<128?o.pushBytes(t):t.length<=55?(o.pushByte(128+t.length),o.pushBytes(t)):(o.pushByte(128+55+n),n===1?o.pushUint8(t.length):n===2?o.pushUint16(t.length):n===3?o.pushUint24(t.length):o.pushUint32(t.length),o.pushBytes(t))}}}function We(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new v("Length is too large.")}function pn(e){const{chainId:t,nonce:n,to:s}=e,o=e.contractAddress??e.address,r=Ae(gt(["0x05",dn([t?S(t):"0x",o,n?S(n):"0x"])]));return s==="bytes"?j(r):r}async function Ke(e){const{authorization:t,signature:n}=e;return un({hash:pn(t),signature:n??t})}function mn({chain:e,currentChainId:t}){if(!e)throw new wt;if(t!==e.id)throw new xt({chain:e,currentChainId:t})}function bn(e,{docsPath:t,...n}){const s=(()=>{const o=Le(e,n);return o instanceof Ue?e:o})();return new Pt(s,{docsPath:t,...n})}async function Qe(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return O(t)}class hn extends v{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class ye extends v{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class yn extends v{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${te(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Ye extends v{constructor({blockHash:t,blockNumber:n}){let s="Block";t&&(s=`Block at hash "${t}"`),n&&(s=`Block at number "${n}"`),super(`${s} could not be found.`,{name:"BlockNotFoundError"})}}const Xe={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Je(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?O(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?O(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Xe[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=gn(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function gn(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function wn(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:Je(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function X(e,{blockHash:t,blockNumber:n,blockTag:s,includeTransactions:o}={}){var l,u,f;const r=s??"latest",a=o??!1,i=n!==void 0?S(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,a]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[i||r,a]},{dedupe:!!i}),!c)throw new Ye({blockHash:t,blockNumber:n});return(((f=(u=(l=e.chain)==null?void 0:l.formatters)==null?void 0:u.block)==null?void 0:f.format)||wn)(c)}async function Ze(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function xn(e,t){var r,a;const{block:n,chain:s=e.chain,request:o}=t||{};try{const i=((r=s==null?void 0:s.fees)==null?void 0:r.maxPriorityFeePerGas)??((a=s==null?void 0:s.fees)==null?void 0:a.defaultPriorityFee);if(typeof i=="function"){const d=n||await w(e,X,"getBlock")({}),l=await i({block:d,client:e,request:o});if(l===null)throw new Error;return l}if(typeof i<"u")return i;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return oe(c)}catch{const[i,c]=await Promise.all([n?Promise.resolve(n):w(e,X,"getBlock")({}),w(e,Ze,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new ye;const d=c-i.baseFeePerGas;return d<0n?0n:d}}async function Fe(e,t){var f,b;const{block:n,chain:s=e.chain,request:o,type:r="eip1559"}=t||{},a=await(async()=>{var m,h;return typeof((m=s==null?void 0:s.fees)==null?void 0:m.baseFeeMultiplier)=="function"?s.fees.baseFeeMultiplier({block:n,client:e,request:o}):((h=s==null?void 0:s.fees)==null?void 0:h.baseFeeMultiplier)??1.2})();if(a<1)throw new hn;const c=10**(((f=a.toString().split(".")[1])==null?void 0:f.length)??0),d=m=>m*BigInt(Math.ceil(a*c))/BigInt(c),l=n||await w(e,X,"getBlock")({});if(typeof((b=s==null?void 0:s.fees)==null?void 0:b.estimateFeesPerGas)=="function"){const m=await s.fees.estimateFeesPerGas({block:n,client:e,multiply:d,request:o,type:r});if(m!==null)return m}if(r==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new ye;const m=typeof(o==null?void 0:o.maxPriorityFeePerGas)=="bigint"?o.maxPriorityFeePerGas:await xn(e,{block:l,chain:s,request:o}),h=d(l.baseFeePerGas);return{maxFeePerGas:(o==null?void 0:o.maxFeePerGas)??h+m,maxPriorityFeePerGas:m}}return{gasPrice:(o==null?void 0:o.gasPrice)??d(await w(e,Ze,"getGasPrice")({}))}}class Pn extends v{constructor(t,{account:n,docsPath:s,chain:o,data:r,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:u,value:f}){var m;const b=Bt({from:n==null?void 0:n.address,to:u,value:typeof f<"u"&&`${ne(f)} ${((m=o==null?void 0:o.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:r,gas:a,gasPrice:typeof i<"u"&&`${te(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${te(c)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${te(d)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:s,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function Bn(e,{docsPath:t,...n}){const s=(()=>{const o=Le(e,n);return o instanceof Ue?e:o})();return new Pn(s,{docsPath:t,...n})}async function Cn(e,t){var o,r,a;const{account:n=e.account}=t,s=n?Z(n):void 0;try{let G=function(U){const{block:Y,request:H,rpcStateOverride:R}=U;return e.request({method:"eth_estimateGas",params:R?[H,Y??"latest",R]:Y?[H,Y]:[H]})};const{accessList:i,authorizationList:c,blobs:d,blobVersionedHashes:l,blockNumber:u,blockTag:f,data:b,gas:m,gasPrice:h,maxFeePerBlobGas:P,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:g,value:T,stateOverride:E,...B}=await rt(e,{...t,parameters:(s==null?void 0:s.type)==="local"?void 0:["blobVersionedHashes"]}),F=(typeof u=="bigint"?S(u):void 0)||f,C=Ct(E),A=await(async()=>{if(B.to)return B.to;if(c&&c.length>0)return await Ke({authorization:c[0]}).catch(()=>{throw new v("`to` is required. Could not infer from `authorizationList`")})})();be(t);const k=(a=(r=(o=e.chain)==null?void 0:o.formatters)==null?void 0:r.transactionRequest)==null?void 0:a.format,Q=(k||He)({...$e(B,{format:k}),from:s==null?void 0:s.address,accessList:i,authorizationList:c,blobs:d,blobVersionedHashes:l,data:b,gas:m,gasPrice:h,maxFeePerBlobGas:P,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:g,to:A,value:T});let q=BigInt(await G({block:F,request:Q,rpcStateOverride:C}));if(c){const U=await vt(e,{address:Q.from}),Y=await Promise.all(c.map(async H=>{const{address:R}=H,bt=await G({block:F,request:{authorizationList:void 0,data:b,from:s==null?void 0:s.address,to:R,value:S(U)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(bt)}));q+=Y.reduce((H,R)=>H+R,0n)}return q}catch(i){throw Bn(i,{...t,account:s,chain:e.chain})}}async function vn(e,{address:t,blockTag:n="latest",blockNumber:s}){const o=await e.request({method:"eth_getTransactionCount",params:[t,typeof s=="bigint"?S(s):n]},{dedupe:!!s});return O(o)}function et(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(r=>j(r)):e.blobs,o=[];for(const r of s)o.push(Uint8Array.from(t.blobToKzgCommitment(r)));return n==="bytes"?o:o.map(r=>J(r))}function tt(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(a=>j(a)):e.blobs,o=typeof e.commitments[0]=="string"?e.commitments.map(a=>j(a)):e.commitments,r=[];for(let a=0;a<s.length;a++){const i=s[a],c=o[a];r.push(Uint8Array.from(t.computeBlobKzgProof(i,c)))}return n==="bytes"?r:r.map(a=>J(a))}function In(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const o=BigInt(32),r=BigInt(4294967295),a=Number(n>>o&r),i=Number(n&r),c=s?4:0,d=s?0:4;e.setUint32(t+c,a,s),e.setUint32(t+d,i,s)}function kn(e,t,n){return e&t^~e&n}function Fn(e,t,n){return e&t^e&n^t&n}class Tn extends It{constructor(t,n,s,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=o,this.buffer=new Uint8Array(t),this.view=ae(this.buffer)}update(t){Pe(this);const{view:n,buffer:s,blockLen:o}=this;t=kt(t);const r=t.length;for(let a=0;a<r;){const i=Math.min(o-this.pos,r-a);if(i===o){const c=ae(t);for(;o<=r-a;a+=o)this.process(c,a);continue}s.set(t.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pe(this),Ft(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:o,isLE:r}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(s,0),a=0);for(let u=a;u<o;u++)n[u]=0;In(s,o-8,BigInt(this.length*8),r),this.process(s,0);const i=ae(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<d;u++)i.setUint32(4*u,l[u],r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:o,finished:r,destroyed:a,pos:i}=this;return t.length=o,t.pos=i,t.finished=r,t.destroyed=a,o%n&&t.buffer.set(s),t}}const En=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),M=new Uint32Array(64);class Nn extends Tn{constructor(t=32){super(64,t,8,!1),this.A=_[0]|0,this.B=_[1]|0,this.C=_[2]|0,this.D=_[3]|0,this.E=_[4]|0,this.F=_[5]|0,this.G=_[6]|0,this.H=_[7]|0}get(){const{A:t,B:n,C:s,D:o,E:r,F:a,G:i,H:c}=this;return[t,n,s,o,r,a,i,c]}set(t,n,s,o,r,a,i,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=o|0,this.E=r|0,this.F=a|0,this.G=i|0,this.H=c|0}process(t,n){for(let u=0;u<16;u++,n+=4)M[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const f=M[u-15],b=M[u-2],m=N(f,7)^N(f,18)^f>>>3,h=N(b,17)^N(b,19)^b>>>10;M[u]=h+M[u-7]+m+M[u-16]|0}let{A:s,B:o,C:r,D:a,E:i,F:c,G:d,H:l}=this;for(let u=0;u<64;u++){const f=N(i,6)^N(i,11)^N(i,25),b=l+f+kn(i,c,d)+En[u]+M[u]|0,h=(N(s,2)^N(s,13)^N(s,22))+Fn(s,o,r)|0;l=d,d=c,c=i,i=a+b|0,a=r,r=o,o=s,s=b+h|0}s=s+this.A|0,o=o+this.B|0,r=r+this.C|0,a=a+this.D|0,i=i+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(s,o,r,a,i,c,d,l)}roundClean(){M.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Gn=Tt(()=>new Nn);function Sn(e,t){const n=t||"hex",s=Gn(le(e,{strict:!1})?Et(e):e);return n==="bytes"?s:fe(s)}function An(e){const{commitment:t,version:n=1}=e,s=e.to??(typeof t=="string"?"hex":"bytes"),o=Sn(t,"bytes");return o.set([n],0),s==="bytes"?o:J(o)}function _n(e){const{commitments:t,version:n}=e,s=e.to??(typeof t[0]=="string"?"hex":"bytes"),o=[];for(const r of t)o.push(An({commitment:r,to:s,version:n}));return o}const Te=6,nt=32,ge=4096,st=nt*ge,Ee=st*Te-1-1*ge*Te;class Mn extends v{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Ln extends v{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Un(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?j(e.data):e.data,s=_e(n);if(!s)throw new Ln;if(s>Ee)throw new Mn({maxSize:Ee,size:s});const o=[];let r=!0,a=0;for(;r;){const i=Me(new Uint8Array(st));let c=0;for(;c<ge;){const d=n.slice(a,a+(nt-1));if(i.pushByte(0),i.pushBytes(d),d.length<31){i.pushByte(128),r=!1;break}c++,a+=31}o.push(i)}return t==="bytes"?o.map(i=>i.bytes):o.map(i=>J(i.bytes))}function Hn(e){const{data:t,kzg:n,to:s}=e,o=e.blobs??Un({data:t,to:s}),r=e.commitments??et({blobs:o,kzg:n,to:s}),a=e.proofs??tt({blobs:o,commitments:r,kzg:n,to:s}),i=[];for(let c=0;c<o.length;c++)i.push({blob:o[c],commitment:r[c],proof:a[c]});return i}function $n(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Nt({transaction:e})}const ot=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Ne=new Map;async function rt(e,t){const{account:n=e.account,blobs:s,chain:o,gas:r,kzg:a,nonce:i,nonceManager:c,parameters:d=ot,type:l}=t,u=n&&Z(n),f={...t,...u?{from:u==null?void 0:u.address}:{}};let b;async function m(){return b||(b=await w(e,X,"getBlock")({blockTag:"latest"}),b)}let h;async function P(){return h||(o?o.id:typeof t.chainId<"u"?t.chainId:(h=await w(e,Qe,"getChainId")({}),h))}if(d.includes("nonce")&&typeof i>"u"&&u)if(c){const p=await P();f.nonce=await c.consume({address:u.address,chainId:p,client:e})}else f.nonce=await w(e,vn,"getTransactionCount")({address:u.address,blockTag:"pending"});if((d.includes("blobVersionedHashes")||d.includes("sidecars"))&&s&&a){const p=et({blobs:s,kzg:a});if(d.includes("blobVersionedHashes")){const y=_n({commitments:p,to:"hex"});f.blobVersionedHashes=y}if(d.includes("sidecars")){const y=tt({blobs:s,commitments:p,kzg:a}),g=Hn({blobs:s,commitments:p,proofs:y,to:"hex"});f.sidecars=g}}if(d.includes("chainId")&&(f.chainId=await P()),(d.includes("fees")||d.includes("type"))&&typeof l>"u")try{f.type=$n(f)}catch{let p=Ne.get(e.uid);if(typeof p>"u"){const y=await m();p=typeof(y==null?void 0:y.baseFeePerGas)=="bigint",Ne.set(e.uid,p)}f.type=p?"eip1559":"legacy"}if(d.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const p=await m(),{maxFeePerGas:y,maxPriorityFeePerGas:g}=await Fe(e,{block:p,chain:o,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<g)throw new yn({maxPriorityFeePerGas:g});f.maxPriorityFeePerGas=g,f.maxFeePerGas=y}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new ye;if(typeof t.gasPrice>"u"){const p=await m(),{gasPrice:y}=await Fe(e,{block:p,chain:o,request:f,type:"legacy"});f.gasPrice=y}}return d.includes("gas")&&typeof r>"u"&&(f.gas=await w(e,Cn,"estimateGas")({...f,account:u&&{address:u.address,type:"json-rpc"}})),be(f),delete f.parameters,f}async function Dn(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const ce=new Gt(128);async function qn(e,t){var y,g,T,E;const{account:n=e.account,chain:s=e.chain,accessList:o,authorizationList:r,blobs:a,data:i,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:b,type:m,value:h,...P}=t;if(typeof n>"u")throw new Oe({docsPath:"/docs/actions/wallet/sendTransaction"});const p=n?Z(n):null;try{be(t);const B=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await Ke({authorization:r[0]}).catch(()=>{throw new v("`to` is required. Could not infer from `authorizationList`.")})})();if((p==null?void 0:p.type)==="json-rpc"||p===null){let I;s!==null&&(I=await w(e,Qe,"getChainId")({}),mn({currentChainId:I,chain:s}));const F=(T=(g=(y=e.chain)==null?void 0:y.formatters)==null?void 0:g.transactionRequest)==null?void 0:T.format,A=(F||He)({...$e(P,{format:F}),accessList:o,authorizationList:r,blobs:a,chainId:I,data:i,from:p==null?void 0:p.address,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:b,to:B,type:m,value:h}),k=ce.get(e.uid),ee=k?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:ee,params:[A]},{retryCount:0})}catch(Q){if(k===!1)throw Q;const G=Q;if(G.name==="InvalidInputRpcError"||G.name==="InvalidParamsRpcError"||G.name==="MethodNotFoundRpcError"||G.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[A]},{retryCount:0}).then(q=>(ce.set(e.uid,!0),q)).catch(q=>{const U=q;throw U.name==="MethodNotFoundRpcError"||U.name==="MethodNotSupportedRpcError"?(ce.set(e.uid,!1),G):U});throw G}}if((p==null?void 0:p.type)==="local"){const I=await w(e,rt,"prepareTransactionRequest")({account:p,accessList:o,authorizationList:r,blobs:a,chain:s,data:i,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:b,nonceManager:p.nonceManager,parameters:[...ot,"sidecars"],type:m,value:h,...P,to:B}),F=(E=s==null?void 0:s.serializers)==null?void 0:E.transaction,C=await p.signTransaction(I,{serializer:F});return await w(e,Dn,"sendRawTransaction")({serializedTransaction:C})}throw(p==null?void 0:p.type)==="smart"?new ie({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ie({docsPath:"/docs/actions/wallet/sendTransaction",type:p==null?void 0:p.type})}catch(B){throw B instanceof ie?B:bn(B,{...t,account:p,chain:t.chain||void 0})}}const Rn=new Map,zn=new Map;function Vn(e){const t=(o,r)=>({clear:()=>r.delete(o),get:()=>r.get(o),set:a=>r.set(o,a)}),n=t(e,Rn),s=t(e,zn);return{clear:()=>{n.clear(),s.clear()},promise:n,response:s}}async function On(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const s=Vn(t),o=s.response.get();if(o&&n>0&&new Date().getTime()-o.created.getTime()<n)return o.data;let r=s.promise.get();r||(r=e(),s.promise.set(r));try{const a=await r;return s.response.set({created:new Date,data:a}),a}finally{s.promise.clear()}}const jn=e=>`blockNumber.${e}`;async function Wn(e,{cacheTime:t=e.cacheTime}={}){const n=await On(()=>e.request({method:"eth_blockNumber"}),{cacheKey:jn(e.uid),cacheTime:t});return BigInt(n)}function Kn(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function at(e,{blockHash:t,blockNumber:n,blockTag:s,hash:o,index:r}){var l,u,f;const a=s||"latest",i=n!==void 0?S(n):void 0;let c=null;if(o?c=await e.request({method:"eth_getTransactionByHash",params:[o]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,S(r)]},{dedupe:!0}):(i||a)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[i||a,S(r)]},{dedupe:!!i})),!c)throw new De({blockHash:t,blockNumber:n,blockTag:a,hash:o,index:r});return(((f=(u=(l=e.chain)==null?void 0:l.formatters)==null?void 0:u.transaction)==null?void 0:f.format)||Je)(c)}const Qn={"0x0":"reverted","0x1":"success"};function Yn(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>Kn(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?O(e.transactionIndex):null,status:e.status?Qn[e.status]:null,type:e.type?Xe[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}async function Ge(e,{hash:t}){var o,r,a;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new qe({hash:t});return(((a=(r=(o=e.chain)==null?void 0:o.formatters)==null?void 0:r.transactionReceipt)==null?void 0:a.format)||Yn)(n)}class Xn extends v{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Jn(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Xn({value:e});let[n,s="0"]=e.split(".");const o=n.startsWith("-");if(o&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),t===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){const[r,a,i]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],c=Math.round(+`${a}.${i}`);c>9?s=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):s=`${r}${c}`,s.length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${o?"-":""}${n}${s}`)}function Zn(e,t="wei"){return Jn(e,St[t])}const ue=new Map,Se=new Map;let es=0;function me(e,t,n){const s=++es,o=()=>ue.get(e)||[],r=()=>{const l=o();ue.set(e,l.filter(u=>u.id!==s))},a=()=>{const l=o();if(!l.some(f=>f.id===s))return;const u=Se.get(e);l.length===1&&u&&u(),r()},i=o();if(ue.set(e,[...i,{id:s,fns:t}]),i&&i.length>0)return a;const c={};for(const l in t)c[l]=(...u)=>{var b,m;const f=o();if(f.length!==0)for(const h of f)(m=(b=h.fns)[l])==null||m.call(b,...u)};const d=n(c);return typeof d=="function"&&Se.set(e,d),a}function ts(e,{emitOnBegin:t,initialWaitTime:n,interval:s}){let o=!0;const r=()=>o=!1;return(async()=>{let i;t&&(i=await e({unpoll:r}));const c=await(n==null?void 0:n(i))??s;await Be(c);const d=async()=>{o&&(await e({unpoll:r}),await Be(s),d())};d()})(),r}function ns(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:s,onError:o,poll:r,pollingInterval:a=e.pollingInterval}){const i=(()=>typeof r<"u"?r:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))();let c;return i?(()=>{const u=pe(["watchBlockNumber",e.uid,t,n,a]);return me(u,{onBlockNumber:s,onError:o},f=>ts(async()=>{var b;try{const m=await w(e,Wn,"getBlockNumber")({cacheTime:0});if(c){if(m===c)return;if(m-c>1&&n)for(let h=c+1n;h<m;h++)f.onBlockNumber(h,c),c=h}(!c||m>c)&&(f.onBlockNumber(m,c),c=m)}catch(m){(b=f.onError)==null||b.call(f,m)}},{emitOnBegin:t,interval:a}))})():(()=>{const u=pe(["watchBlockNumber",e.uid,t,n]);return me(u,{onBlockNumber:s,onError:o},f=>{let b=!0,m=()=>b=!1;return(async()=>{try{const h=(()=>{if(e.transport.type==="fallback"){const p=e.transport.transports.find(y=>y.config.type==="webSocket");return p?p.value:e.transport}return e.transport})(),{unsubscribe:P}=await h.subscribe({params:["newHeads"],onData(p){var g;if(!b)return;const y=oe((g=p.result)==null?void 0:g.number);f.onBlockNumber(y,c),c=y},onError(p){var y;(y=f.onError)==null||y.call(f,p)}});m=P,b||m()}catch(h){o==null||o(h)}})(),()=>m()})})()}async function ss(e,{confirmations:t=1,hash:n,onReplaced:s,pollingInterval:o=e.pollingInterval,retryCount:r=6,retryDelay:a=({count:c})=>~~(1<<c)*200,timeout:i=18e4}){const c=pe(["waitForTransactionReceipt",e.uid,n]);let d,l,u,f=!1;const{promise:b,resolve:m,reject:h}=At(),P=i?setTimeout(()=>h(new _t({hash:n})),i):void 0,p=me(c,{onReplaced:s,resolve:m,reject:h},y=>{const g=w(e,ns,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:o,async onBlockNumber(T){const E=I=>{clearTimeout(P),g(),I(),p()};let B=T;if(!f)try{if(u){if(t>1&&(!u.blockNumber||B-u.blockNumber+1n<t))return;E(()=>y.resolve(u));return}if(d||(f=!0,await Ce(async()=>{d=await w(e,at,"getTransaction")({hash:n}),d.blockNumber&&(B=d.blockNumber)},{delay:a,retryCount:r}),f=!1),u=await w(e,Ge,"getTransactionReceipt")({hash:n}),t>1&&(!u.blockNumber||B-u.blockNumber+1n<t))return;E(()=>y.resolve(u))}catch(I){if(I instanceof De||I instanceof qe){if(!d){f=!1;return}try{l=d,f=!0;const F=await Ce(()=>w(e,X,"getBlock")({blockNumber:B,includeTransactions:!0}),{delay:a,retryCount:r,shouldRetry:({error:k})=>k instanceof Ye});f=!1;const C=F.transactions.find(({from:k,nonce:ee})=>k===l.from&&ee===l.nonce);if(!C||(u=await w(e,Ge,"getTransactionReceipt")({hash:C.hash}),t>1&&(!u.blockNumber||B-u.blockNumber+1n<t)))return;let A="replaced";C.to===l.to&&C.value===l.value&&C.input===l.input?A="repriced":C.from===C.to&&C.value===0n&&(A="cancelled"),E(()=>{var k;(k=y.onReplaced)==null||k.call(y,{reason:A,replacedTransaction:l,transaction:C,transactionReceipt:u}),y.resolve(u)})}catch(F){E(()=>y.reject(F))}}else E(()=>y.reject(I))}}})});return b}async function os(e,t){const{abi:n,account:s=e.account,address:o,args:r,dataSuffix:a,functionName:i,...c}=t;if(typeof s>"u")throw new Oe({docsPath:"/docs/contract/writeContract"});const d=s?Z(s):null,l=Mt({abi:n,args:r,functionName:i});try{return await w(e,qn,"sendTransaction")({data:`${l}${a?a.replace("0x",""):""}`,to:o,account:d,...c})}catch(u){throw Lt(u,{abi:n,address:o,args:r,docsPath:"/docs/contract/writeContract",functionName:i,sender:d==null?void 0:d.address})}}function rs(e,t={}){const{key:n="custom",methods:s,name:o="Custom Provider",retryDelay:r}=t;return({retryCount:a})=>Ut({key:n,methods:s,name:o,request:e.request.bind(e),retryCount:t.retryCount??a,retryDelay:r,type:"custom"})}async function as(e,t={}){let n;if(t.connector){const{connector:d}=t;if(e.state.status==="reconnecting"&&!d.getAccounts&&!d.getChainId)throw new Ht({connector:d});const[l,u]=await Promise.all([d.getAccounts().catch(f=>{if(t.account===null)return[];throw f}),d.getChainId()]);n={accounts:l,chainId:u,connector:d}}else n=e.state.connections.get(e.state.current);if(!n)throw new $t;const s=t.chainId??n.chainId,o=await n.connector.getChainId();if(o!==n.chainId)throw new Dt({connectionChainId:n.chainId,connectorChainId:o});const r=n.connector;if(r.getClient)return r.getClient({chainId:s});const a=Z(t.account??n.accounts[0]);if(a&&(a.address=qt(a.address)),t.account&&!n.accounts.some(d=>d.toLowerCase()===a.address.toLowerCase()))throw new Rt({address:a.address,connector:r});const i=e.chains.find(d=>d.id===s),c=await n.connector.getProvider({chainId:s});return zt({account:a,chain:i,name:"Connector Client",transport:d=>rs(c)({...d,retryCount:0})})}async function is(e,t){const{chainId:n,timeout:s=0,...o}=t,r=e.getClient({chainId:n}),i=await se(r,ss,"waitForTransactionReceipt")({...o,timeout:s});if(i.status==="reverted"){const d=await se(r,at,"getTransaction")({hash:i.transactionHash}),u=await se(r,Ot,"call")({...d,data:d.input,gasPrice:d.type!=="eip1559"?d.gasPrice:void 0,maxFeePerGas:d.type==="eip1559"?d.maxFeePerGas:void 0,maxPriorityFeePerGas:d.type==="eip1559"?d.maxPriorityFeePerGas:void 0}),f=u!=null&&u.data?Vt(`0x${u.data.substring(138)}`):"unknown reason";throw new Error(f)}return{...i,chainId:r.chain.id}}async function cs(e,t){const{account:n,chainId:s,connector:o,...r}=t;let a;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?a=e.getClient({chainId:s}):a=await as(e,{account:n??void 0,chainId:s,connector:o}),await se(a,os,"writeContract")({...r,...n?{account:n}:{},chain:s?{id:s}:null})}function us(e,t={}){return{async queryFn({queryKey:n}){const s=t.abi;if(!s)throw new Error("abi is required");const{functionName:o,scopeKey:r,...a}=n[1],i=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!o)throw new Error("functionName is required");return jt(e,{abi:s,functionName:o,args:a.args,...i,...a})},queryKey:ds(t)}}function ds(e={}){const{abi:t,...n}=e;return["readContract",Re(n)]}function ls(e,t={}){return{async queryFn({queryKey:n}){const{hash:s,...o}=n[1];if(!s)throw new Error("hash is required");return is(e,{...o,onReplaced:t.onReplaced,hash:s})},queryKey:fs(t)}}function fs(e={}){const{onReplaced:t,...n}=e;return["waitForTransactionReceipt",Re(n)]}function ps(e){return{mutationFn(t){return cs(e,t)},mutationKey:["writeContract"]}}function de(e={}){const{abi:t,address:n,functionName:s,query:o={}}=e,r=e.code,a=he(e),i=$({config:a}),c=us(a,{...e,chainId:e.chainId??i}),d=!!((n||r)&&t&&s&&(o.enabled??!0));return ze({...o,...c,enabled:d,structuralSharing:o.structuralSharing??Wt})}function we(e={}){const{hash:t,query:n={}}=e,s=he(e),o=$({config:s}),r=ls(s,{...e,chainId:e.chainId??o}),a=!!(t&&(n.enabled??!0));return ze({...n,...r,enabled:a})}function xe(e={}){const{mutation:t}=e,n=he(e),s=ps(n),{mutate:o,mutateAsync:r,...a}=Kt({...t,...s});return{...a,writeContract:o,writeContractAsync:r}}const ms="0x8dde1922d5f772890f169714faceef9551791caf",K=[{name:"getProposal",type:"function",stateMutability:"view",inputs:[{name:"proposalId",type:"uint256"}],outputs:[{type:"tuple",components:[{name:"id",type:"uint256"},{name:"proposer",type:"address"},{name:"description",type:"string"},{name:"proposalType",type:"uint8"},{name:"token",type:"address"},{name:"amount",type:"uint256"},{name:"forVotes",type:"uint256"},{name:"againstVotes",type:"uint256"},{name:"executed",type:"bool"},{name:"canceled",type:"bool"},{name:"startBlock",type:"uint256"},{name:"endBlock",type:"uint256"}]}]},{name:"getProposalCount",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"getProposalsInRange",type:"function",stateMutability:"view",inputs:[{name:"start",type:"uint256"},{name:"end",type:"uint256"}],outputs:[{type:"tuple[]",components:[{name:"id",type:"uint256"},{name:"proposer",type:"address"},{name:"description",type:"string"},{name:"proposalType",type:"uint8"},{name:"token",type:"address"},{name:"amount",type:"uint256"},{name:"forVotes",type:"uint256"},{name:"againstVotes",type:"uint256"},{name:"executed",type:"bool"},{name:"canceled",type:"bool"},{name:"startBlock",type:"uint256"},{name:"endBlock",type:"uint256"}]}]},{name:"state",type:"function",stateMutability:"view",inputs:[{name:"proposalId",type:"uint256"}],outputs:[{type:"uint8"}]},{name:"hasVoted",type:"function",stateMutability:"view",inputs:[{name:"proposalId",type:"uint256"},{name:"voter",type:"address"}],outputs:[{type:"bool"}]},{name:"propose",type:"function",stateMutability:"nonpayable",inputs:[{name:"token",type:"address"},{name:"amount",type:"uint256"},{name:"description",type:"string"},{name:"proposalType",type:"uint8"}],outputs:[{type:"uint256"}]},{name:"castVote",type:"function",stateMutability:"nonpayable",inputs:[{name:"proposalId",type:"uint256"},{name:"support",type:"bool"}],outputs:[{type:"uint256"}]},{name:"execute",type:"function",stateMutability:"nonpayable",inputs:[{name:"proposalId",type:"uint256"}],outputs:[{type:"bool"}]},{name:"cancel",type:"function",stateMutability:"nonpayable",inputs:[{name:"proposalId",type:"uint256"}],outputs:[{type:"bool"}]},{name:"quorum",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"votingPeriod",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"votingDelay",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]}],bs=[{name:"name",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{name:"symbol",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{name:"decimals",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{name:"totalSupply",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"balanceOf",type:"function",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{name:"transfer",type:"function",stateMutability:"nonpayable",inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{name:"allowance",type:"function",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{name:"approve",type:"function",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{name:"transferFrom",type:"function",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"amount",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0},{name:"spender",type:"address",indexed:!0},{name:"value",type:"uint256",indexed:!1}],anonymous:!1}],V={address:ms,abi:K,chainId:D.id};function Ms(e){return{address:e,abi:bs,chainId:D.id}}function hs(e,t){let n=z.Active;t!==void 0?n=t:e.executed?n=z.Executed:e.canceled&&(n=z.Canceled);const s=Date.now(),o=new Date(s-864e5),r=new Date(s+864e5),a=e.amount?Number(ne(e.amount.toString())):0;return{id:Number(e.id),proposer:e.proposer,description:e.description||"",proposalType:Number(e.proposalType),token:e.token,amount:a,forVotes:e.forVotes?Number(ne(e.forVotes.toString())):0,againstVotes:e.againstVotes?Number(ne(e.againstVotes.toString())):0,executed:!!e.executed,canceled:!!e.canceled,state:n,createdAt:o,votingEnds:r}}function Ls(e={}){const{limit:t=10,offset:n=0}=e,o=$()===D.id,{data:r,isLoading:a,error:i}=de({abi:K,address:V.address,functionName:"getProposalCount",query:{enabled:o,retry:1,retryDelay:500}}),{data:c,isLoading:d}=de({abi:[{name:"proposalCount",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"getProposalsCount",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]}],address:V.address,functionName:"proposalCount",query:{enabled:o&&!r,retry:1}});let l=0;r?l=Number(r):c?l=Number(c):i&&(console.warn("Could not get proposal count, using default fallback value",i),l=50);const u=Math.max(0,l-n-t),f=Math.max(0,l-n),{data:b,isLoading:m,error:h,refetch:P}=de({abi:K,address:V.address,functionName:"getProposalsInRange",args:[BigInt(u),BigInt(f)],query:{enabled:o&&l>0&&f>u,retry:2,retryDelay:1e3}});h&&l>0&&console.info("Range query failed, using fallback data instead");const y=[];if(b&&Array.isArray(b))for(const g of b){const T=hs(g);y.push(T)}if(y.length===0&&h){console.warn("Creating placeholder proposals as contract calls failed");for(let g=1;g<=5;g++)y.push({id:g,proposer:"0x3639D1F746A977775522221f53D0B1eA5749b8b9",description:`Placeholder proposal ${g} for testing. This is generated because actual contract calls failed.`,proposalType:g%2===0?Ie.Investment:Ie.Divestment,token:"0xd093d7331448766923fe7ab270a9f6bce63cefda",amount:1e4*g,forVotes:100*g,againstVotes:50*g,executed:!1,canceled:!1,state:g%3===0?z.Active:g%3===1?z.Succeeded:z.Defeated,createdAt:new Date(Date.now()-864e5*g),votingEnds:new Date(Date.now()+864e5*(g%3===0?1:-1))})}return{proposals:y.reverse(),totalCount:l,isLoading:a||d||m,error:y.length===0&&h?"Error loading proposals: "+String(h):null,refetch:P,usingFallback:y.length>0&&h}}function Us(){const t=$()===D.id,{writeContractAsync:n,isPending:s,error:o,data:r}=xe(),{isLoading:a,isSuccess:i}=we({hash:r});return{castVote:x.useCallback(async(d,l)=>{if(!t)throw new Error("Please connect to Sepolia network to vote on proposals");try{const u=await n({abi:K,address:V.address,functionName:"castVote",args:[BigInt(d),l]});return W.success(`Vote ${l?"for":"against"} proposal submitted!`),u}catch(u){throw console.error("Error voting on proposal:",u),W.error("Failed to vote: "+(u instanceof Error?u.message:"Unknown error")),u}},[n,t]),isPending:s,isConfirming:a,isConfirmed:i,error:o,transactionHash:r}}function Hs(){const t=$()===D.id,{writeContractAsync:n,isPending:s,error:o,data:r}=xe(),{isLoading:a,isSuccess:i}=we({hash:r});return{executeProposal:x.useCallback(async d=>{if(!t)throw new Error("Please connect to Sepolia network to execute proposals");try{const l=await n({abi:K,address:V.address,functionName:"execute",args:[BigInt(d)]});return W.success("Proposal execution submitted!"),l}catch(l){throw console.error("Error executing proposal:",l),W.error("Failed to execute proposal: "+(l instanceof Error?l.message:"Unknown error")),l}},[n]),isPending:s,isConfirming:a,isConfirmed:i,error:o,transactionHash:r}}function $s(){const t=$()===D.id,{writeContractAsync:n,isPending:s,error:o,data:r}=xe(),{isLoading:a,isSuccess:i}=we({hash:r});return{createProposal:x.useCallback(async d=>{if(!t)throw new Error("Please connect to Sepolia network to create proposals");try{const l=Zn(d.amount),u=await n({abi:K,address:V.address,functionName:"propose",args:[d.token,l,d.description,d.proposalType]});return W.success("Proposal transaction submitted!"),u}catch(l){throw console.error("Error creating proposal:",l),W.error("Failed to create proposal: "+(l instanceof Error?l.message:"Unknown error")),l}},[n]),isPending:s,isConfirming:a,isConfirmed:i,error:o,transactionHash:r}}const ys={"0xd093d7331448766923fe7ab270a9f6bce63cefda":{symbol:"USDC",name:"USD Coin",decimals:6,color:"text-blue-400",bgColor:"bg-blue-900/20"},"0x9c3c9283d3e44854697cd22d3faa240cfb032889":{symbol:"WBTC",name:"Wrapped Bitcoin",decimals:8,color:"text-orange-400",bgColor:"bg-orange-900/20"},"0xe5d7c2a44ffddf6b295a15c148167daaaf5cf34f":{symbol:"DLOOP",name:"D-Loop Token",decimals:18,color:"text-purple-400",bgColor:"bg-purple-900/20"}},gs=e=>e?e.toLowerCase():"",it=e=>{if(!e)return{symbol:"Unknown",name:"Unknown Token",decimals:18,color:"text-gray",bgColor:"bg-gray/20"};const t=gs(e);return ys[t]||{symbol:e.slice(0,6)+"..."+e.slice(-4),name:"Unknown Token",decimals:18,color:"text-gray",bgColor:"bg-gray/20"}},ws=(e,t)=>{try{const n=it(t);return(typeof e=="bigint"?Number(e)/Math.pow(10,n.decimals):Number(e)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})}catch(n){return console.error("Error formatting token amount:",n),"0"}},Ds=(e,t)=>{const n=ws(e,t),{symbol:s}=it(t);return`${n} ${s}`};function qs(){const{address:e,isConnected:t,isConnecting:n}=Qt(),{disconnect:s,isPending:o}=Yt(),r=$(),{data:a}=Xt({address:e,query:{enabled:!!e}}),{connect:i,isNetworkSupported:c,switchToSepolia:d}=Jt();return{address:e||null,isConnected:t,isConnecting:n,isDisconnecting:o,chainId:r,balance:a?a.formatted:null,isNetworkSupported:r===D.id,connect:i,disconnect:s,switchToSepolia:d,usingWagmi:!0}}var xs=Zt[" useInsertionEffect ".trim().toString()]||tn;function Ps({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[o,r,a]=Bs({defaultProp:t,onChange:n}),i=e!==void 0,c=i?e:o;{const l=x.useRef(e!==void 0);x.useEffect(()=>{const u=l.current;u!==i&&console.warn(`${s} is changing from ${u?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=i},[i,s])}const d=x.useCallback(l=>{var u;if(i){const f=Cs(l)?l(e):l;f!==e&&((u=a.current)==null||u.call(a,f))}else r(l)},[i,e,r,a]);return[c,d]}function Bs({defaultProp:e,onChange:t}){const[n,s]=x.useState(e),o=x.useRef(n),r=x.useRef(t);return xs(()=>{r.current=t},[t]),x.useEffect(()=>{var a;o.current!==n&&((a=r.current)==null||a.call(r,n),o.current=n)},[n,o]),[n,s,r]}function Cs(e){return typeof e=="function"}var vs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ct=vs.reduce((e,t)=>{const n=en(`Primitive.${t}`),s=x.forwardRef((o,r)=>{const{asChild:a,...i}=o,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),L.jsx(c,{...i,ref:r})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),re="Switch",[Is,Rs]=nn(re),[ks,Fs]=Is(re),ut=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:o,defaultChecked:r,required:a,disabled:i,value:c="on",onCheckedChange:d,form:l,...u}=e,[f,b]=x.useState(null),m=Ve(t,g=>b(g)),h=x.useRef(!1),P=f?l||!!f.closest("form"):!0,[p,y]=Ps({prop:o,defaultProp:r??!1,onChange:d,caller:re});return L.jsxs(ks,{scope:n,checked:p,disabled:i,children:[L.jsx(ct.button,{type:"button",role:"switch","aria-checked":p,"aria-required":a,"data-state":pt(p),"data-disabled":i?"":void 0,disabled:i,value:c,...u,ref:m,onClick:sn(e.onClick,g=>{y(T=>!T),P&&(h.current=g.isPropagationStopped(),h.current||g.stopPropagation())})}),P&&L.jsx(ft,{control:f,bubbles:!h.current,name:s,value:c,checked:p,required:a,disabled:i,form:l,style:{transform:"translateX(-100%)"}})]})});ut.displayName=re;var dt="SwitchThumb",lt=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,o=Fs(dt,n);return L.jsx(ct.span,{"data-state":pt(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t})});lt.displayName=dt;var Ts="SwitchBubbleInput",ft=x.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...o},r)=>{const a=x.useRef(null),i=Ve(a,r),c=on(n),d=rn(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const u=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(u,"checked").set;if(c!==n&&b){const m=new Event("click",{bubbles:s});b.call(l,n),l.dispatchEvent(m)}},[c,n,s]),L.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:i,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ft.displayName=Ts;function pt(e){return e?"checked":"unchecked"}var mt=ut,Es=lt;const Ns=x.forwardRef(({className:e,...t},n)=>L.jsx(mt,{className:ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:L.jsx(Es,{className:ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ns.displayName=mt.displayName;export{Ns as S,it as a,qs as b,xe as c,Ls as d,Us as e,Hs as f,Ms as g,Ds as h,$s as i,Gn as s,de as u};
