const i=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",a=o=>{if(o.startsWith("/api/")){const n={"/api/protocol/proposals":"protocol-proposals","/api/protocol/metrics":"protocol-metrics","/api/leaderboard":"leaderboard","/api/leaderboard-delegations":"leaderboard-delegations","/api/ainodes":"ainodes","/api/ainodes-performance":"ainodes-performance","/api/ainodes-sentiments":"ainodes-sentiments"};return n[o]?`/.netlify/functions/${n[o]}`:`/.netlify/functions/${o.replace("/api/","").replace(/\//g,"-")}`}return o},c=async(o,n,t)=>{const r=a(o);console.log(`Fetching from: ${r}`);try{const e=await fetch(r,n);if(!e.ok)throw new Error(`HTTP error ${e.status}: ${e.statusText}`);const s=e.headers.get("content-type");if(!s||!s.includes("application/json"))throw new Error(`Expected JSON response but got ${s}`);return await e.json()}catch(e){if(console.error(`Error fetching from ${r}:`,e),i()&&t)return console.log(`Using mock data for ${o} in development mode`),t;throw e}};export{c as f};
