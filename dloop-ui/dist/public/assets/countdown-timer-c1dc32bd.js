import{r as i,j as e}from"./index-971aa118.js";import{C as o}from"./clock-6db2a81c.js";function w({endTime:r,onComplete:c,compact:m=!1,className:l=""}){const[t,x]=i.useState(null),[f,u]=i.useState(!1),d=()=>{try{const s=typeof r=="string"?new Date(r):r;if(isNaN(s.getTime()))return console.error("Invalid end time provided to CountdownTimer"),null;const n=s.getTime()-Date.now();if(n<=0)return f||(u(!0),c==null||c()),{total:0,days:0,hours:0,minutes:0,seconds:0};const h=Math.floor(n/(1e3*60*60*24)),j=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(n%(1e3*60*60)/(1e3*60)),N=Math.floor(n%(1e3*60)/1e3);return{total:n,days:h,hours:j,minutes:g,seconds:N}}catch(s){return console.error("Error in countdown calculation:",s),null}};if(i.useEffect(()=>{x(d());const s=setInterval(()=>{const n=d();x(n),n&&n.total<=0&&clearInterval(s)},1e3);return()=>clearInterval(s)},[r]),!t)return null;const a=s=>s<10?`0${s}`:`${s}`;return m?t.days>0?e.jsxs("div",{className:`flex items-center text-xs ${l}`,children:[e.jsx(o,{className:"w-3 h-3 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[t.days,"d left"]})]}):t.hours>0?e.jsxs("div",{className:`flex items-center text-xs ${l}`,children:[e.jsx(o,{className:"w-3 h-3 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[t.hours,"h left"]})]}):e.jsxs("div",{className:`flex items-center text-xs ${l}`,children:[e.jsx(o,{className:"w-3 h-3 mr-1 text-warning-red"}),e.jsxs("span",{className:"text-warning-red",children:[t.minutes,"m left"]})]}):e.jsxs("div",{className:`flex flex-col ${l}`,children:[e.jsxs("div",{className:"flex items-center text-sm mb-1",children:[e.jsx(o,{className:"w-4 h-4 mr-1.5 text-primary"}),e.jsx("span",{children:"Time Remaining"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 text-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-mono font-bold",children:a(t.days)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Days"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-mono font-bold",children:a(t.hours)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Hours"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-mono font-bold",children:a(t.minutes)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Min"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-mono font-bold",children:a(t.seconds)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Sec"})]})]})]})}export{w as C};
