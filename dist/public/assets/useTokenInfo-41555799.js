import{u as w,w as P,J as p,z as n}from"./index-e1be7c10.js";import{a as v}from"./contracts-3445139a.js";function b(){const{signer:r,address:o,isConnected:l}=w(),{data:e,isLoading:s,error:c,refetch:u}=P({queryKey:["token-info",o],queryFn:async()=>{if(!o||!l)return{availableBalance:"0",delegatedAmount:"0",totalVotingPower:"0"};try{let t;if(r)t=r;else{const m={}.NEXT_PUBLIC_SEPOLIA_RPC_URL||"https://sepolia.infura.io/v3/";t=new p(m)}const a=v("DLoopToken",t),g=await a.balanceOf(o),i=await a.getTotalDelegatedAmount(o),d=g-i,f=await a.getTotalDelegatedToAmount(o);return{availableBalance:n(d),delegatedAmount:n(i),totalVotingPower:n(f)}}catch(t){throw console.error("Error fetching token info:",t),t}},enabled:!!o&&l,staleTime:3e4});return{availableBalance:(e==null?void 0:e.availableBalance)||"0",delegatedAmount:(e==null?void 0:e.delegatedAmount)||"0",totalVotingPower:(e==null?void 0:e.totalVotingPower)||"0",isLoading:s,error:c,refetch:u}}export{b as u};
